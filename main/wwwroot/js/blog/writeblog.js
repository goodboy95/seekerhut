"use strict";var layedit,contentBox,tagArr=[];function tagDelete(){var a=event.srcElement.id,b=tagArr.indexOf(a);tagArr.splice(b,1),document.getElementById(a).remove()}window.onload=function(){document.getElementById("menu-writeblog").classList.add("layui-this"),layui.use("layedit",function(){layedit=layui.layedit,contentBox=layedit.build("content")}),layui.use("layer",function(){layui.layer}),$.get("/blogapi/tagList/",{userId:Cookies.get("id")},function(a){if(0===a.code)for(var b=a.data.tagList,c=0;c<b.length;c++)document.getElementById("tagList").innerHTML+="<option value="+b[c].tagName+">"+b[c].tagName+"</option>";else alert(a.msg)}),document.getElementById("createTag").onclick=function(){var a=document.getElementById("tagText").value;document.getElementById("tagList").innerHTML+="<option value="+a+">"+a+"</option>",document.getElementById("tagText").value="",alert("\u6807\u7B7E\u521B\u5EFA\u6210\u529F\uFF01")},document.getElementById("addTag").onclick=function(){layer.open({type:1,title:"\u6807\u7B7E\u7BA1\u7406",content:$("#tagLayer")})},document.getElementById("confirmAddTag").onclick=function(){var a=document.getElementById("tagList"),b=a.selectedIndex,c=a.options[b].text;-1==tagArr.indexOf(c)?(document.getElementById("tags").innerHTML+="<a class=\"tag\" id=\""+c+"\" onclick=tagDelete()>"+c+"</a><br />",tagArr.push(c),alert("\u6807\u7B7E\u6DFB\u52A0\u6210\u529F\uFF01"),layer.close(layer.index)):alert("\u8BE5\u6807\u7B7E\u5DF2\u7ECF\u5B58\u5728\uFF01")},document.getElementById("submit").onclick=function(){$.post("/blogapi/blog/",{title:document.getElementById("title").value,content:layedit.getContent(contentBox),tags:tagArr,privacy:0,__RequestVerificationToken:$("#token").find("input").val()},function(a){0===a.code?(alert("\u535A\u5BA2\u4E0A\u4F20\u6210\u529F\uFF01"),location.href="/blog/index/"):alert(a.msg)})}};