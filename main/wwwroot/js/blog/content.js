"use strict";var replyArr=[];window.onload=function(){new Vue({el:"#replyList",data:{replies:replyArr}});document.getElementById("menu-myblog").classList.add("layui-this");var a,b,c,d=document.getElementById("blogID").innerHTML,e=!1;layui.use("layedit",function(){a=layui.layedit,b=a.build("replyText")}),layui.use("flow",function(){var a=layui.flow;a.load({elem:"#replyList",done:function(a,b){$.get("/blogapi/replylist/",{blogID:d,pageNo:a,pageSize:5},function(d){if(0===parseInt(d.code)){c=d.data.ReplyNum;for(var f=d.data.ReplyList,g=0;g<f.length;g++){var h=f[g].author,i=f[g].content;replyArr.push({author:h,content:i})}b("",5*a<c),5*a>=c&&(e=!0)}else return})}})}),document.getElementById("replySubmit").onclick=function(){var f=a.getContent(b),g=Cookies.get("username"),h=document.getElementById("authorID").innerHTML;$.post("/blogapi/reply/",{blogAuthorID:h,blogID:d,content:f,__RequestVerificationToken:$("#token").find("input").val()},function(a){if(0!==a.code)alert(a.msg);else if(alert("\u56DE\u590D\u6210\u529F\uFF01"),!e)c++;else{replyArr.push({author:g,content:f})}})}};