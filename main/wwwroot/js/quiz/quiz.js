"use strict";var _stringify=require("babel-runtime/core-js/json/stringify"),_stringify2=_interopRequireDefault(_stringify);function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var form,quizBody,currentQues=0,quesCount=0,quesRoute=[],answerArr=[];function OnNextClick(a,b){var c,d={},e=b.quesType,f=quizBody[currentQues].options;if("single"===e)c=parseInt(quizBody[currentQues].nextQues);else{var g=parseInt(b.field.answer);c=parseInt(f[g].rel)}return d.quesNo=currentQues,d.answer=b.field.answer,answerArr[quesCount]=d,quesRoute[quesCount]=currentQues,0<c?(currentQues=c-1,quesCount++,RenderQuestion()):$.post("/quizApi/answer",{quizID:a,answer:(0,_stringify2.default)(answerArr)},function(){alert("You have successfully finished this quiz!"),window.location.href="/"}),!1}function RenderQuestion(){$("#optQuesTitle").html(""),$("#textQuesTitle").html(""),$("#optionArea").html(""),$("#answerArea").val("");var a=quizBody[currentQues],b=a.quesName,c=a.options;if(console.log(currentQues),console.log(0==currentQues),0==currentQues?$(".prev").hide():$(".prev").show(),$(".ques-number").html("Question "+(quesCount+1)),$(".ques-text").html(""+b),2===parseInt(a.answerType)){$("#optionQues").show(),$("#textQues").hide();for(var d,e=0;e<c.length;e++)d=document.getElementById("optAnswer").cloneNode(!0),d.value=e,d.title=c[e].text,0===e&&(d.checked=!0),$("#optionArea").append($(d)).append("<br />");form.render("radio")}else $("#optionQues").hide(),$("#textQues").show()}window.onload=function(){var a=document.getElementById("quizID").value;layui.use("form",function(){form=layui.form,form.on("submit(optNext)",function(b){b.quesType="multiple",OnNextClick(a,b)}),form.on("submit(textNext)",function(b){b.quesType="single",OnNextClick(a,b)}),form.on("submit(prev)",function(){currentQues=quesRoute[quesCount-1],quesCount--,answerArr.pop(),quesRoute.pop(),RenderQuestion()})}),document.getElementById("startQuiz").onclick=function(){$("#intro").hide(),$.get("/quizApi/quiz",{quizID:a},function(a){quizBody=JSON.parse(a.data.quizBody),RenderQuestion()})}};